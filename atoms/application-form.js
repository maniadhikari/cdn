const logMessage=e=>{let t=`[+] Form: ${e}`;window.location.hostname.includes("webflow.io")&&console.warn(t)},atomsForm=document.querySelector("#wf-form-Application-Form"),steps=Array.from(document.querySelectorAll("[data-step]")),prevButton=document.getElementById("prevButton");prevButton?prevButton.addEventListener("click",previousStep):logMessage("Cannot initialize previous button");const nextButton=document.getElementById("nextButton");nextButton?nextButton.addEventListener("click",nextStep):logMessage("Cannot initialize next button");const formStartButton=document.querySelector("#form-start");formStartButton?formStartButton.addEventListener("click",nextStep):logMessage("Cannot initialize form start button");const submitButton=document.getElementById("submit-button"),stepsIndicator=document.getElementById("stepsIndicator"),stepIndicatorNames=["Home","Program","Profile","Startup Details","Pitch Deck","About You","Others"],textAreaValidator=(e,t)=>{let r=e.split(/[\s]+/);return!(r.length>100)},textAreaErrorMessage="Use less than 100 words",urlValidator=(e,t)=>{if(!e)return!0;try{return new URL(e),!0}catch(r){return!1}},urlErrorMessage="Please input a valid URL",phoneNumberInput=document.querySelector("#phone"),dialCode=document.querySelector(".dialCode"),iti=intlTelInput(phoneNumberInput,{initialCountry:"in",preferredCountries:["in","sg"],placeholderNumberType:"FIXED_LINE_OR_MOBILE",customPlaceholder:function(e,t){return"in"===t.iso2?"74104 10123":e}}),updateInputValue=function(e){dialCode&&(dialCode.value="+"+iti.getSelectedCountryData().dialCode)};phoneNumberInput&&(phoneNumberInput.addEventListener("input",updateInputValue,!1),phoneNumberInput.addEventListener("countrychange",updateInputValue,!1));const phoneValidator=(e,t)=>iti.isValidNumber()?(phoneNumberInput&&$(phoneNumberInput).focus(),!0):(iti.getValidationError(),phoneNumberInput&&$(phoneNumberInput).focus(),!1),currencyValidator=(e,t)=>e>=0,schema={"Program-Type":[{rule:"required"}],"Applicant-Linkedin-URL":[{rule:"required"},{validator:urlValidator,errorMessage:urlErrorMessage}],"Email-Address":[{rule:"required"},{rule:"email"}],"First-Name":[{rule:"required"}],"Contact-Number":[{rule:"required"},{validator:phoneValidator,errorMessage:"Invalid phone number"}],"Current-Team":[{rule:"required"}],"Teams-AI-Experience":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Teams-Industry-Experience":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Company-Website":[{validator:urlValidator,errorMessage:urlErrorMessage}],"Demo-URL":[{validator:urlValidator,errorMessage:urlErrorMessage}],"Time-Commitment":[{rule:"required"}],"Company-Stage":[{rule:"required"}],"Amount-Raised":[{validator:(e,t)=>e>=0,errorMessage:"Amount cannot be negative"}],"Startup-Idea":[{rule:"required"},{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Pitch-Deck-File":[{rule:"minFilesCount",value:1,errorMessage:"Please upload your pitch deck"}],"I-am-remarkably-good-at":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"I-am-leveraging-technology-in-my-business-by":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"About-Previous-Batch-Experience":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Different-Idea-Because":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Why-Applying":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Previous-Batch":[{rule:"required"}],"Applied-for-Previous-Batch-but":[{validator:textAreaValidator,errorMessage:textAreaErrorMessage}],"Fellow-Founder":[{rule:"required"}],"Agree-to-Terms":[{rule:"required",errorMessage:"Please accept our Privacy Policy."}]};let validator;function initValidation(e){(validator=new window.JustValidate(atomsForm,{rules:{},validateBeforeSubmitting:!0,errorLabelStyle:{fontSize:"14px",color:"#ea384c"}})).onValidate(({isValid:e,isSubmitted:t,fields:r,groups:a})=>{e?(enableNextButton(),enableSubmitButton()):(disableNextButton(),disableSubmitButton())});let t=$(e).find("input, textarea");t.each((e,t)=>{let{type:r,name:a}=t;if(a){let i=schema[a];if(i){if(r&&"radio"===r){let o=$(t).parents(".radio-button-wrapper");o&&o[0]&&validator.addRequiredGroup(o[0],"Select one option")}else if(r&&"checkbox"===r){if("Agree-to-Terms"===a){let n=$(t).parents(".terms-checkbox-wrapper");n&&n[0]&&validator.addRequiredGroup(n[0],"Please accept our Privacy Policy.")}else{let l=$(t).parents(".checkbox-wrapper");l&&l[0]&&validator.addRequiredGroup(l[0],"Select atleast one option")}}else{let s=$(t).parents(".form-fields-wrapper"),d;s&&s[0]&&(d=s[0]),validator.addField(t,i,{errorsContainer:d})}}}else logMessage("init validation: invalid name")})}function removeValidation(){validator&&validator.destroy()}const storeStepInLocalStorage=()=>{let e=getCurrentStep(),t=JSON.stringify(e);localStorage.setItem("formStep",t)};function restoreStepFromLocalStorage(){let e=localStorage.getItem("formStep")||1,t=parseInt(e,10);navigateToStep(t)}function deleteStepFromLocalStorage(){localStorage.removeItem("formStep")}function getCurrentStep(){let e=document.querySelector('[data-step]:not([style*="display: none"])');if(e){let t=e.getAttribute("data-step");if(t)return parseInt(t,10)}return 1}async function navigateToStep(e){let t=getCurrentStep();if(steps.forEach(t=>{if(t.getAttribute("data-step")===e.toString()){removeValidation();let r=e===steps.length?atomsForm:t;initValidation(r),t.style.display="grid"}else t.style.display="none"}),storeStepInLocalStorage(),toggleNaviagtionButtonVisibility(e),toggleSubmitButtonVisibility(e),stepsIndicator){let r=Array.from(stepsIndicator.children);r.forEach((t,r)=>{r===e-1?t.classList.add("text-style-bold"):t.classList.remove("text-style-bold")}),r.forEach((t,r)=>{r>=e?t.classList.add("breadcrumbs-disabled"):t.classList.remove("breadcrumbs-disabled")})}else logMessage("Cannot update stepsIndicator");setTimeout(async()=>{await validator.revalidate(),validator.isValid&&enableNextButton(),setTimeout(()=>{getCurrentStep(),t!==e&&window.scrollTo({top:0,behavior:"smooth"})},200)},500)}function previousStep(){let e=getCurrentStep();if(e){let t=e-1;t>=1&&navigateToStep(t)}else logMessage("Cannot go to the previous step")}async function nextStep(){let e=getCurrentStep();if(e){let t=e+1;if(t<=steps.length){let r=await validator.revalidate();(r||1===e)&&(disableNextButton(),disableSubmitButton(),navigateToStep(t))}}else logMessage("Cannot go to next step")}function toggleNaviagtionButtonVisibility(e){prevButton&&(prevButton.style.display=1===e?"none":"flex"),nextButton&&(nextButton.style.display=e===steps.length||1===e?"none":"flex")}function disableNextButton(){nextButton&&nextButton.classList.add("is-disabled")}function enableNextButton(){nextButton&&nextButton.classList.remove("is-disabled")}function disableSubmitButton(){submitButton&&submitButton.classList.add("is-disabled")}function enableSubmitButton(){submitButton&&submitButton.classList.remove("is-disabled")}function toggleSubmitButtonVisibility(e){submitButton&&(submitButton.style.display=e===steps.length?"flex":"none")}function resetHiddenFields(e){$(e).find('input[type="text"], input[type="number"], input[type="email"], textarea').each(function(){$(this).is(":hidden")&&$(this).val("")}),$(e).find('input[type="radio"]').each(function(){let e=$(this);e.is(":checked")&&(e.prop("checked",!1),$(e).siblings().removeClass("w--redirected-checked"))})}function hideAndClearFields(e){$(e).hide(),resetHiddenFields(e)}steps.forEach((e,t)=>{let r=e.getAttribute("data-step");if(r){let a=parseInt(r,10),i=stepIndicatorNames[a-1],o=document.createElement("a");o.href="#",o.classList.add("breadcrumb-link"),o.textContent=`${i}${t===steps.length-1?"":" >"}`,o.addEventListener("click",()=>{navigateToStep(a)}),stepsIndicator?stepsIndicator.appendChild(o):logMessage("Cannot find stepsIndicator container")}});const maxInput=5,addMore=$("#team-member").find(".add-more-field");function toggleAddMoreVisibility(){let e=$(".linkedin-field-wrapper").find("input:visible").length;5===e?addMore.hide():addMore.show()}function addDeleteButtonListener(e){e.on("click",e=>{let t=$(e.target).parents(".linkedin-field");t.hide(),resetHiddenFields(t[0]),storeFormStateInLocalStorage(atomsForm);let r=$(".linkedin-field-wrapper").find("input:visible").length;validator.removeField(`#co-founder-${r+1}`),toggleAddMoreVisibility()})}const addConditionalLogic=()=>{$("input[type='radio'][name='Program-Type']").on("input",()=>{let e=$("input[type='radio'][name='Program-Type']:checked").val();hideAndClearFields("#segment-ai"),hideAndClearFields("#segment-industry"),hideAndClearFields("#program-others"),"AI"===e?$("#segment-ai").show():"Industry 5.0"===e?$("#segment-industry").show():$("#program-others").show()}),$("input[type='radio'][name='Segment-Industry']").on("input",()=>{let e=$("input[type='radio'][name='Segment-Industry']:checked").val();"Other"===e?$("#industry-other").show():hideAndClearFields("#industry-other")}),$("input[type='radio'][name='Current-Team']").on("input",()=>{let e=$("input[type='radio'][name='Current-Team']:checked").val();if("Have co-founder"===e)$("#team-member").show(),validator.addField("#co-founder-1",[{rule:"required"},{validator:urlValidator,errorMessage:urlErrorMessage}]),addMore&&addMore.on("click",()=>{let e=$(".linkedin-field-wrapper").find("input:visible").length;if(e<5){let t=$(".linkedin-field-wrapper"),r=t.children("div:visible:last").next();r.css("display","flex"),validator.addField(`#co-founder-${t.find("input:visible").length}`,[{validator:urlValidator,errorMessage:urlErrorMessage}],{errorsContainer:r});let a=r.find(".remove-field");addDeleteButtonListener(a),toggleAddMoreVisibility()}});else{hideAndClearFields("#team-member"),validator.removeField("#co-founder-1");let t=$("#team-member").find(".add-more-field");t&&t.off("click")}}),$("input[type='radio'][name='Program-Type']").on("input",()=>{let e=$("input[type='radio'][name='Program-Type']:checked").val();hideAndClearFields("#ai-experience"),hideAndClearFields("#industry-experience"),"AI"===e?$("#ai-experience").show():"Industry 5.0"===e&&$("#industry-experience").show()}),$("input[type='radio'][name='Funded']").on("input",()=>{let e=$("input[type='radio'][name='Funded']:checked").val();hideAndClearFields("#show-funded"),"Yes"===e&&$("#show-funded").show()}),$("input[type='radio'][name='Program-Type']").on("input",()=>{let e=$("input[type='radio'][name='Program-Type']:checked").val();hideAndClearFields("#ai-flow"),hideAndClearFields("#technology"),"Industry 5.0"===e?$("#technology").css("display","grid"):$("#ai-flow").css("display","grid")}),$("input[type='radio'][name='Previous-Batch']").on("input",()=>{let e=$("input[type='radio'][name='Previous-Batch']:checked").val();hideAndClearFields("#applied-batch"),"Yes"===e&&$("#applied-batch").show()}),$("input[type='radio'][name='Previously-Applied']").on("input",()=>{let e=$("input[type='radio'][name='Previously-Applied']:checked").val();hideAndClearFields("#elaborate-field"),e&&$("#elaborate-field").show()}),$("#learnt-others").on("input",()=>{let e=$("#learnt-others").is(":checked");hideAndClearFields("#heard-others"),e&&$("#heard-others").show()})};function readFormValues(e){let t=Array.from(e.querySelectorAll("input, textarea, select")),r={};return t.forEach(e=>{let{name:t,value:a,type:i,disabled:o}=e;if(t&&!o){if("file"===i)return;if("checkbox"===i)r[t]=e.checked;else if("radio"===i){let n=e;n.checked?r[t]=n.value:r.hasOwnProperty(t)||(r[t]="")}else r[t]=a}}),r}function storeFormStateInLocalStorage(e){let t=readFormValues(e),r=JSON.stringify(t);localStorage.setItem("formState",r)}function writeFormValues(e,t){let r=JSON.parse(e);Object.entries(r).forEach(([e,r])=>{let a=t.querySelectorAll(`input[name="${e}"], textarea[name="${e}"]`);if(0===a.length)return;let i=a[0].type;if("file"!==i){if("checkbox"===i){let o=a[0];o.checked=r,r&&($(o).siblings().addClass("w--redirected-checked"),o.dispatchEvent(new Event("input")))}else if("radio"===i)a.forEach(e=>{let t=e;t.value===r&&(t.checked=!0,t.dispatchEvent(new Event("input")),$(t).siblings().addClass("w--redirected-checked"))});else{let n=a[0];if(n.value=r,r&&n.name.includes("Co---Founder-Linkedin")){$(n).parent().css("display","flex"),validator.addField(n,[{validator:urlValidator,errorMessage:urlErrorMessage}],{errorsContainer:$(n).parent()[0]});let l=$(n).parent().find(".remove-field");addDeleteButtonListener(l),toggleAddMoreVisibility()}n.dispatchEvent(new Event("input")),"textarea"===i&&updateTextAreaWordCount(n)}}})}function restoreFormStateFromLocalStorage(e){let t=localStorage.getItem("formState");t&&writeFormValues(t,e)}function deleteFormStateFromLocalStorage(){localStorage.removeItem("formState")}function handleInput(e){let{target:t}=e,{form:r}=t;storeFormStateInLocalStorage(r),"textarea"===t.type&&updateTextAreaWordCount(t)}function updateTextAreaWordCount(e){let t=$(e).siblings(".word-limit");t&&t.text(`Word Limit: ${e.value?e.value.split(/[\s]+/).length:0}/100`)}const initalizeForm=e=>{addConditionalLogic(),restoreStepFromLocalStorage(),restoreFormStateFromLocalStorage(e),toggleNaviagtionButtonVisibility(getCurrentStep()),toggleSubmitButtonVisibility(getCurrentStep());let t=Array.from(e.querySelectorAll("input, textarea, select"));t.forEach(e=>{let{type:t}=e;"submit"!==t&&e.addEventListener("input",handleInput)})};initalizeForm(atomsForm),$(atomsForm).on("submit",e=>{e.preventDefault();let{fields:t,groupFields:r}=validator,a=[];if(Object.values(t).forEach(e=>{e.isValid||a.push(e)}),Object.values(r).forEach(e=>{e.isValid||a.push(e)}),a&&a[0]){let i=$(a[0].elem).parents(".form-step");if(i.length&&i[0]){let o=i[0].getAttribute("data-step");o&&navigateToStep(parseInt(o,10))}}return validator.isValid&&(deleteFormStateFromLocalStorage(),deleteStepFromLocalStorage(),removeValidation(),setTimeout(()=>{resetHiddenFields(atomsForm)},2e3)),validator.isValid}),$(document).on("keydown",":input:not(textarea)",function(e){"Enter"===e.key&&e.preventDefault()});